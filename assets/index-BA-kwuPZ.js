(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const te=[["path",{d:"M20 6 9 17l-5-5"}]];const ee=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];const ne=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];const oe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z"}]];const se=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];const le=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],Nt="16px 'Inter', system-ui",A=220,O=48,F=12,re=16,Tt=280,Ct=360,ae=.9,ie=.4,ce=2.5,ue=.0015,de=24,fe=60,pe="rgba(148, 163, 184, 0.5)",he="#ffffff",ge="rgba(148, 163, 184, 0.35)",be=80,Ot=350,L={default:{fill:"#ffffff",strokeBranch:"#d4d4d8",strokeLeaf:"#d4d4d8",text:"#0f172a"},completed:{fill:"#22c55e",stroke:"#16a34a",text:"#0f172a"},cancelled:{fill:"#e5e7eb",stroke:"#94a3b8",text:"#475569"}},me={cancel:{color:"#94a3b8",activeColor:"#64748b"},complete:{color:"#86efac",activeColor:"#22c55e"},add:{color:"#fde68a",activeColor:"#fbbf24"},restore:{color:"#c7d2fe",activeColor:"#818cf8"},delete:{color:"#fecaca",activeColor:"#f87171"},rename:{color:"#fef3c7",activeColor:"#fbbf24"}},ye=20,ke="#0f172a",Q=800,it=.1,St=.15,we=.15,_t={cancel:le,complete:te,add:ee,restore:ne,delete:se,rename:oe},Ae="rgba(15, 23, 42, 0.2)",nt=18,Te=12,Ce="#2563eb",Oe="#1d4ed8",Se="#ffffff";let ft=new WeakMap;function ot(t){const e=ft.get(t);if(e!==void 0)return e;const n=t.subtasks,o=n.length?n.reduce((s,a)=>s+ot(a),0):1;return ft.set(t,o),o}function mt(t){return Math.max(ot(t),1)*(O+fe)}function Ee(){try{const t=localStorage.getItem("taskdag-state");if(t){const e=JSON.parse(t),n=new Map;return Array.isArray(e.states)&&e.states.forEach(([o,s])=>{n.set(o,s)}),{task:e.task,states:n}}}catch(t){console.warn("Failed to load state from localStorage",t)}return{task:{label:"Base",subtasks:[{label:"EECS MEng",subtasks:[{label:"NORAM scholarship",subtasks:[{label:"Recommendation letters",subtasks:[{label:"Rec letter 1",subtasks:[]},{label:"Rec letter 2",subtasks:[]},{label:"Rec letter 3",subtasks:[]}]},{label:"Application letter",subtasks:[]}]}]}]},states:new Map}}function Pt(t,e,n=[]){const o=[],s=e.get(t);return s&&o.push([JSON.stringify(n),s]),t.subtasks.forEach((a,r)=>{o.push(...Pt(a,e,[...n,r]))}),o}function xt(t,e,n,o=[]){const s=JSON.stringify(o),a=n.get(s);a&&e.set(t,a),t.subtasks.forEach((r,u)=>{xt(r,e,n,[...o,u])})}function lt(t,e){try{const n=Pt(t,e),o={task:t,states:n};localStorage.setItem("taskdag-state",JSON.stringify(o))}catch(n){console.warn("Failed to save state to localStorage",n)}}const Bt=Ee();let y=Bt.task;const{canvas:j,ctx:l}=Me();let N=Xt(j,l);const Ft=Y(y);let yt=Gt(Ft,N.width),pt=mt(y),E=N.width/2-(Ft*yt+A)/2,M=N.height/2-pt/2,g=1,_=E,P=M,$=g,ht=null,i=null,w=null,R=[];const U=new Map;let kt=[];const k=new WeakMap;xt(y,k,Bt.states);let Wt=0,Z=null,V=1,ct=null,D=null,gt=null,K="",x=null,H=null,st=null,et=null;const Et="add-root-task-button",v=new Set;let X=null,bt=0;De(j);Ie(j);window.addEventListener("resize",()=>{N=Xt(j,l),T()});Re();Le();T();function T(t=performance.now()){en(t),ft=new WeakMap;const e=Y(y);if(yt=Gt(e,N.width),pt=mt(y),R=[],U.clear(),kt=[],l.clearRect(0,0,N.width,N.height),_e(N,E,M,g),l.save(),l.translate(E,M),l.scale(g,g),Pe(y,pt),Ze(),l.restore(),et){const n=R.find(o=>o.task===et);n?(i=n,w=null):(i=null,w=null),et=null,requestAnimationFrame(()=>T());return}if(H){const n=R.find(a=>a.task===H);n&&(i=n,w=null);const o=H,s=st;H=null,st=null,$t(o,s),requestAnimationFrame(()=>T())}else Ut()}function Me(){const t=document.querySelector("canvas");if(!t)throw new Error("Could not find canvas");const e=t.getContext("2d");if(!e)throw new Error("Could not get context");return{canvas:t,ctx:e}}function Xt(t,e){const n=window.devicePixelRatio||1,o=window.innerWidth,s=window.innerHeight;return t.style.touchAction="none",t.style.width=`${o}px`,t.style.height=`${s}px`,t.width=o*n,t.height=s*n,e.setTransform(1,0,0,1,0,0),e.scale(n,n),e.font=Nt,e.textBaseline="middle",e.lineCap="round",e.lineJoin="round",{width:o,height:s,dpr:n}}function De(t){let e=!1,n=0,o=0;t.style.cursor="grab";const s=r=>{if(e)return;const{worldX:u,worldY:d}=We(t,r);let c=Xe(u,d),f=null;if(c&&(c.task===y?c=null:f=Ge(c,u)),!c||f===null){const p=He(u,d);p&&p.task!==y&&(c=p,f="add")}i=c,w=f,T()};t.addEventListener("pointerdown",r=>{if(r.button===0){if(x&&D&&x.blur(),s(r),i&&i.task===y){r.preventDefault();return}if(i&&w){B(w,i),w=null,r.preventDefault();return}e=!0,n=r.clientX-E,o=r.clientY-M,t.setPointerCapture(r.pointerId),t.style.cursor="grabbing",r.preventDefault()}}),t.addEventListener("pointermove",r=>{if(e){E=r.clientX-n,M=r.clientY-o,_=E,P=M,$=g,T(),r.preventDefault();return}s(r)});const a=r=>{e&&(e=!1,t.hasPointerCapture(r.pointerId)&&t.releasePointerCapture(r.pointerId),t.style.cursor="grab",s(r))};["pointerup","pointerleave","pointercancel"].forEach(r=>{t.addEventListener(r,u=>{r!=="pointerup"&&(i=null,w=null,T()),a(u)})})}function Ie(t){t.addEventListener("wheel",e=>{e.preventDefault();const n=t.getBoundingClientRect(),o=e.clientX-n.left,s=e.clientY-n.top,a=Math.exp(-e.deltaY*ue),r=z(g*a,ie,ce);if(r===$)return;const u=(o-E)/g,d=(s-M)/g,c=o-u*r,f=s-d*r;$=r,_=c,P=f,rt()},{passive:!1})}function rt(){ht===null&&(ht=requestAnimationFrame(ve))}function ve(t){ht=null;const e=_-E,n=P-M,o=$-g;let s=!1;Math.abs(e)>it?(E+=e*St,s=!0):E=_,Math.abs(n)>it?(M+=n*St,s=!0):M=P,Math.abs(o)>it?(g+=o*we,s=!0):g=$,T(),s&&rt()}function Ht(){const t={label:"",subtasks:[]};y.subtasks.push(t),H=t,st=y,lt(y,k),T()}function Re(){if(document.getElementById(Et))return;const t=document.createElement("button");t.id=Et,t.type="button",t.textContent="+",t.style.position="fixed",t.style.bottom="24px",t.style.right="24px",t.style.width="56px",t.style.height="56px",t.style.borderRadius="50%",t.style.border="none",t.style.background="linear-gradient(135deg, #2563eb, #7c3aed)",t.style.color="#ffffff",t.style.fontSize="32px",t.style.fontWeight="600",t.style.cursor="pointer",t.style.boxShadow="0 12px 24px rgba(37, 99, 235, 0.3)",t.style.display="flex",t.style.alignItems="center",t.style.justifyContent="center",t.style.transition="transform 0.15s ease, box-shadow 0.15s ease",t.addEventListener("pointerdown",e=>e.stopPropagation()),t.addEventListener("click",()=>{Ht()}),t.addEventListener("pointerenter",()=>{t.style.transform="scale(1.05)",t.style.boxShadow="0 16px 32px rgba(37, 99, 235, 0.35)"}),t.addEventListener("pointerleave",()=>{t.style.transform="scale(1)",t.style.boxShadow="0 12px 24px rgba(37, 99, 235, 0.3)"}),document.body.appendChild(t)}function Le(){window.addEventListener("keydown",t=>{if(D||t.metaKey||t.ctrlKey||t.altKey||i&&i.task===y)return;let e=!1;const n=t.key.toLowerCase();if((n==="w"||n==="s"||n==="a"||n==="d")&&(v.has(n)||(v.add(n),t.preventDefault(),Ne(),e=!0)),!e)switch(t.key){case"ArrowUp":case"k":case"K":t.preventDefault(),tt("up"),e=!0;break;case"ArrowDown":case"j":case"J":t.preventDefault(),tt("down"),e=!0;break;case"ArrowLeft":case"h":case"H":t.preventDefault(),tt("left"),e=!0;break;case"ArrowRight":case"l":case"L":t.preventDefault(),tt("right"),e=!0;break;case" ":case"Spacebar":case"Space":{if(!i)break;t.preventDefault(),B("complete",i),e=!0;break}case"Enter":{t.preventDefault(),t.shiftKey?i&&i.task!==y?B("add",i):Ht():i&&i.task!==y&&B("rename",i),e=!0;break}case"r":case"R":{if(!i)break;t.preventDefault(),B("rename",i),e=!0;break}case"c":case"C":{if(!i)break;t.preventDefault(),B("cancel",i),e=!0;break}case"Backspace":{if(!i)break;t.preventDefault(),t.shiftKey?B("delete",i):B("cancel",i),e=!0;break}}e&&(w=null)}),window.addEventListener("keyup",t=>{if(D)return;const e=t.key.toLowerCase();(e==="w"||e==="s"||e==="a"||e==="d")&&(v.delete(e),v.size===0&&Mt())}),window.addEventListener("blur",()=>{v.clear(),Mt()})}function Ne(){X===null&&(bt=performance.now(),X=requestAnimationFrame(Yt))}function Mt(){X!==null&&(cancelAnimationFrame(X),X=null)}function Yt(t){if(X=null,v.size===0)return;const e=(t-bt)/1e3;bt=t;let n=0,o=0;v.has("w")&&(o+=Q*e),v.has("s")&&(o-=Q*e),v.has("a")&&(n+=Q*e),v.has("d")&&(n-=Q*e),(n!==0||o!==0)&&(_+=n,P+=o,rt()),v.size>0&&(X=requestAnimationFrame(Yt))}function _e(t,e,n,o){l.fillStyle=he,l.fillRect(0,0,t.width,t.height),l.strokeStyle=ge,l.lineWidth=1;const s=be,a=-e/o-s,r=(t.width-e)/o+s,u=-n/o-s,d=(t.height-n)/o+s,c=Math.floor(a/s)*s,f=Math.floor(u/s)*s;l.beginPath();for(let p=c;p<r;p+=s){const h=e+o*p;l.moveTo(h,0),l.lineTo(h,t.height)}for(let p=f;p<d;p+=s){const h=n+o*p;l.moveTo(0,h),l.lineTo(t.width,h)}l.stroke()}function Y(t,e=0){const n=t.subtasks.map(o=>Y(o,e+1));return Math.max(e,...n)}function Gt(t,e){if(t<=0)return Ct;const o=Math.max(e*ae-A,Tt)/Math.max(t,1);return z(o,Tt,Ct)}function Pe(t,e){qt(t,[0,1],0,e,Y(t),null,!1,!1)}function qt(t,e=[0,1],n=0,o=mt(t),s=Y(t,n),a=null,r=!0,u=!0){const[d,c]=e,f=o*((d+c)/2),p=(s-n)*yt,h=t.subtasks,{x:b,y:m}=Fe(t,p,f);if(r){const I=h.length?{completed:h.filter(W=>(k.get(W)??"default")==="completed").length,total:h.length}:void 0;kt.push({task:t,x:b,y:m,hasChildren:h.length>0,parent:a,progress:I})}if(U.set(t,{x:b,y:m}),!h.length)return;const S=h.reduce((I,W)=>I+ot(W),0)||h.length;let C=d;const G=c-d;h.forEach(I=>{const W=ot(I)/S||1/h.length,q=G*W,wt=C,Jt=wt+q,jt=de/o,At=Math.min(q/2-1e-4,jt),Qt=Y(I,n+1);qt(I,[wt+At,Jt-At],n+1,o,Qt,t);const at=U.get(I);at&&u&&r&&Be(at.x+A,at.y,b,m),C+=q})}function xe(t,e,n,o,s,a){const r=t.label,u=k.get(t)??"default",d=n-O/2,c=u==="completed"?L.completed:u==="cancelled"?L.cancelled:L.default,f=s&&s.total>0?Math.min(s.completed/s.total,1):null,p=i?.task===t&&w==="add",h=i?.task===t&&!p&&w===null;l.save(),h?Dt(e,d,A,O,F):ut(e,d,A,O,F),l.clip(),l.fillStyle=c.fill,l.fillRect(e,d,A,O),f!==null&&f>0&&Je(e,d,A,O,f),l.restore();let b;u==="completed"?b=L.completed.stroke:u==="cancelled"?b=L.cancelled.stroke:b=o?L.default.strokeBranch:L.default.strokeLeaf,l.strokeStyle=b,l.lineWidth=2,h?Dt(e,d,A,O,F):ut(e,d,A,O,F),l.stroke();const m=u==="completed"?L.completed.text:u==="cancelled"?L.cancelled.text:L.default.text;if(l.fillStyle=m,l.fillText(r,e+re,n),h){const S=O*.75,C=d-S;Ke(t,e,C,A,S,w),l.save(),l.strokeStyle="#2563eb",l.lineWidth=3;const G=S+O;ut(e,C,A,G,F),l.stroke(),l.restore()}a&&Ve(t,a)}function ut(t,e,n,o,s){l.beginPath(),l.moveTo(t+s,e),l.lineTo(t+n-s,e),l.quadraticCurveTo(t+n,e,t+n,e+s),l.lineTo(t+n,e+o-s),l.quadraticCurveTo(t+n,e+o,t+n-s,e+o),l.lineTo(t+s,e+o),l.quadraticCurveTo(t,e+o,t,e+o-s),l.lineTo(t,e+s),l.quadraticCurveTo(t,e,t+s,e),l.closePath()}function Dt(t,e,n,o,s){l.beginPath(),l.moveTo(t,e),l.lineTo(t+n,e),l.lineTo(t+n,e+o-s),l.quadraticCurveTo(t+n,e+o,t+n-s,e+o),l.lineTo(t+s,e+o),l.quadraticCurveTo(t,e+o,t,e+o-s),l.lineTo(t,e),l.closePath()}function It(t,e,n,o,s){l.beginPath(),l.moveTo(t+s,e),l.lineTo(t+n-s,e),l.quadraticCurveTo(t+n,e,t+n,e+s),l.lineTo(t+n,e+o),l.lineTo(t,e+o),l.lineTo(t,e+s),l.quadraticCurveTo(t,e,t+s,e),l.closePath()}function Be(t,e,n,o){l.strokeStyle=pe,l.lineWidth=2,l.beginPath(),l.moveTo(t,e),l.bezierCurveTo((t+n)/2,e,(t+n)/2,o,n,o),l.stroke()}function Fe(t,e,n){if(!Z)return{x:e,y:n};const o=Z.get(t);if(!o)return{x:e,y:n};const s=V;return{x:Lt(o.x,e,s),y:Lt(o.y,n,s)}}function We(t,e){const n=t.getBoundingClientRect(),o=e.clientX-n.left,s=e.clientY-n.top;return{worldX:(o-E)/g,worldY:(s-M)/g}}function Xe(t,e){for(let n=R.length-1;n>=0;n-=1){const o=R[n];if(t>=o.x&&t<=o.x+o.width&&e>=o.y&&e<=o.y+o.height)return o}return null}function He(t,e){for(let n=R.length-1;n>=0;n-=1){const o=R[n],s=o.addButton;if(!s)continue;const a=t-s.cx,r=e-s.cy;if(a*a+r*r<=s.radius*s.radius)return o}return null}function tt(t){if(!R.length)return;if(!i){i=R[0],w=null,vt(i),T();return}const e=Ye(i,t);e&&(i=e,w=null,vt(i),T())}function vt(t){const e=t.x,n=t.x+t.width,o=t.y,s=t.y+t.height,a=_+g*e,r=_+g*n,u=P+g*o,d=P+g*s,c=40,f=c,p=N.width-c,h=c,b=N.height-c;let m=!1,S=_,C=P;r<f?(S=f-g*e,m=!0):a>p?(S=p-g*n,m=!0):a<f?(S=f-g*e,m=!0):r>p&&(S=p-g*n,m=!0),d<h?(C=h-g*o,m=!0):u>b?(C=b-g*s,m=!0):u<h?(C=h-g*o,m=!0):d>b&&(C=b-g*s,m=!0),m&&(_=S,P=C,rt())}function Ye(t,e){if(!t)return null;const n=t.x+t.width/2,o=t.y+t.height/2;let s=null,a=1/0;return R.forEach(r=>{if(r===t)return;const u=r.x+r.width/2,d=r.y+r.height/2,c=u-n,f=d-o;let p=!1,h=0,b=0;switch(e){case"up":if(f>=0)return;p=!0,h=Math.abs(f),b=Math.abs(c)*.5;break;case"down":if(f<=0)return;p=!0,h=Math.abs(f),b=Math.abs(c)*.5;break;case"left":if(c>=0)return;p=!0,h=Math.abs(c),b=Math.abs(f)*.5;break;case"right":if(c<=0)return;p=!0,h=Math.abs(c),b=Math.abs(f)*.5;break}if(!p)return;const m=h+b;m<a&&(a=m,s=r)}),s}function Ge(t,e){const n=Kt(t.task);if(!n.length)return null;const o=e-t.x;if(o<0||o>A)return null;const s=A/n.length,a=Math.min(n.length-1,Math.floor(o/s));return n[a]??null}function Kt(t){if(t===y)return[];const e=k.get(t)??"default";return e==="cancelled"||e==="completed"?["delete","restore"]:["cancel","rename","complete"]}function B(t,e){const n=e.task,o=t==="add"||t==="delete",s=o?Qe():null;if(t==="cancel")k.get(n)==="cancelled"?J(n):Vt(n,"cancelled");else if(t==="complete")k.get(n)==="completed"?k.delete(n):k.set(n,"completed");else if(t==="add"){const a={label:"",subtasks:[]};n.subtasks.push(a),k.delete(n),H=a,st=n}else if(t==="restore")J(n);else if(t==="delete"){if(n===y)return;const a=e.parent;i&&i.task===n&&(i=null,w=null),qe(e),a?et=a:(i=null,w=null)}else t==="rename"&&$t(n,e.parent);o&&s&&tn(s),lt(y,k),T()}function Vt(t,e){k.set(t,e),t.subtasks.forEach(n=>Vt(n,e))}function J(t){k.delete(t),t.subtasks.forEach(e=>J(e))}function qe(t){const e=t.parent;e&&(e.subtasks=e.subtasks.filter(n=>n!==t.task),J(t.task))}function Ke(t,e,n,o,s,a){const r=Kt(t);if(!r.length)return;const u=(k.get(t)??"default")==="default",d=o/r.length;l.save(),l.lineWidth=1,l.textAlign="center",l.textBaseline="middle",It(e,n,o,s,F),l.clip(),r.forEach((c,f)=>{const p=e+f*d,h=e+(f+1)*d,b=f===0?e:p-.5,m=f===r.length-1?e+o:h+.5,S=Math.max(m-b,d),C=me[c];l.fillStyle=a===c?C.activeColor:C.color,l.fillRect(b,n,S,s);const G=p+d/2,I=n+s/2,W=u?.6:.5,q=Math.min(d,s)*W;Ue(c,G,I,Math.min(q,ye))}),l.restore(),l.save(),l.strokeStyle=Ae,It(e,n,o,s,F),l.stroke(),l.restore()}function Ve(t,e){if(!$e(t))return;const n=i?.task===t&&w==="add";l.save(),l.beginPath();const o=nt;l.arc(e.cx,e.cy,o,0,Math.PI*2),l.shadowColor="rgba(37, 99, 235, 0.3)",l.shadowBlur=12,l.fillStyle=n?Oe:Ce,l.fill(),l.shadowBlur=0,l.strokeStyle="rgba(255, 255, 255, 0.5)",l.lineWidth=1,l.stroke();const s=_t.add,a=nt*1;zt(s,e.cx,e.cy,a,Se),l.restore()}function ze(t,e,n){return(k.get(t)??"default")!=="default"?null:{cx:e-Te-nt,cy:n,radius:nt*1.6}}function $e(t){return i?i.task===t:!1}function Ue(t,e,n,o){const s=_t[t];s&&zt(s,e,n,o,ke)}function zt(t,e,n,o,s){l.save(),l.translate(e-o/2,n-o/2);const r=o/24;l.scale(r,r),l.lineCap="round",l.lineJoin="round",l.strokeStyle=s,l.fillStyle=s,l.lineWidth=2,t.forEach(([u,d])=>{switch(u){case"path":{const c=d.d;if(!c)break;const f=new Path2D(String(c)),p=d.fill??"none";p&&p!=="none"&&l.fill(f),l.stroke(f);break}}}),l.restore()}function Ze(){kt.forEach(({task:t,x:e,y:n,hasChildren:o,parent:s,progress:a})=>{const r=n-O/2,u=ze(t,e,n);R.push({task:t,parent:s,x:e,y:r,width:A,height:O,addButton:u}),xe(t,e,n,o,a,u)})}function Je(t,e,n,o,s){const a=Math.max(n*s,0);if(a<=0)return;const r=l.createLinearGradient(t,e,t+a,e);r.addColorStop(0,"rgba(34, 197, 94, 0.25)"),r.addColorStop(.5,"rgba(34, 197, 94, 0.35)"),r.addColorStop(1,"rgba(34, 197, 94, 0.45)"),l.fillStyle=r,l.fillRect(t,e,a,o),l.fillStyle="rgba(255, 255, 255, 0.35)",l.fillRect(t,e,a,1),l.fillStyle="rgba(15, 23, 42, 0.15)",l.fillRect(t,e+o-1,a,1)}function je(){if(x)return x;const t=document.createElement("input");return t.type="text",t.autocomplete="off",t.spellcheck=!1,t.style.position="absolute",t.style.zIndex="100",t.style.border="1px solid #d4d4d8",t.style.borderRadius=`${F}px`,t.style.background="rgba(255,255,255,0.95)",t.style.boxShadow="0 1px 2px rgba(15,23,42,0.08)",t.style.font=Nt,t.style.color="#0f172a",t.style.padding="6px 10px",t.style.display="none",t.style.transformOrigin="top left",t.style.boxSizing="border-box",document.body.appendChild(t),t.addEventListener("input",()=>{D&&(D.label=t.value,lt(y,k),T())}),t.addEventListener("keydown",e=>{e.key==="Enter"?(e.preventDefault(),dt(!0),e.stopPropagation()):e.key==="Escape"&&(e.preventDefault(),dt(!1),e.stopPropagation())}),t.addEventListener("blur",()=>{D&&dt(!0)}),x=t,t}function $t(t,e){const n=je();D=t,gt=e,K=t.label,n.value=t.label,n.style.display="block",Ut(),requestAnimationFrame(()=>{n.focus(),n.select()})}function Ut(){const t=x;if(!t)return;if(!D){t.style.display="none";return}const e=U.get(D);if(!e){t.style.display="none";return}const n=j.getBoundingClientRect(),o=n.left+E+g*e.x,s=n.top+M+g*(e.y-O/2),a=A*g,r=O*g,u=z(16*g,12,22),d=z(6*g,4,12),c=z(10*g,6,18);t.style.display="block",t.style.left=`${o}px`,t.style.top=`${s}px`,t.style.width=`${Math.max(40,a)}px`,t.style.height=`${Math.max(24,r)}px`,t.style.fontSize=`${u}px`,t.style.padding=`${d}px ${c}px`}function dt(t){if(!D||!x)return;const e=D,n=gt,o=x.value;if(!t)!K.trim()&&n?Rt(e,n):e.label=K;else{const s=o.trim();s?e.label=s:n?Rt(e,n):e.label=K}D=null,gt=null,K="",x.style.display="none",lt(y,k),T()}function Rt(t,e){e&&(e.subtasks=e.subtasks.filter(n=>n!==t),J(t))}function Qe(){return new Map(U)}function tn(t){Z=t,Wt=performance.now(),V=0,Zt()}function en(t){if(!Z){V=1;return}const e=t-Wt;if(e>=Ot){Z=null,V=1;return}const n=Math.min(Math.max(e/Ot,0),1);V=nn(n),Zt()}function Zt(){ct===null&&(ct=requestAnimationFrame(t=>{ct=null,T(t)}))}function Lt(t,e,n){return t+(e-t)*n}function nn(t){return t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2}function z(t,e,n){return Math.min(Math.max(t,e),n)}
